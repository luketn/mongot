{
  "tests": [
    {
      "description": "voyage-3-large sanitized secret",
      "json": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3-large",
        "config": {
          "region": "us-east-1",
          "modelConfig": {
            "batchSize": 100,
            "batchTokenLimit": 1000,
            "outputDimensions": 512,
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "initialRetryWaitMs": 50,
            "jitter": 0.1,
            "maxRetries": 50,
            "maxRetryWaitMs": 10
          },
          "credentials": {
            "apiToken": "xxx-sanitized-xxx",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "query": {
            "modelConfig": {
              "batchSize": 100,
              "batchTokenLimit": 1000,
              "outputDimensions": 512,
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "initialRetryWaitMs": 50,
              "jitter": 0.1,
              "maxRetries": 50,
              "maxRetryWaitMs": 10
            },
            "credentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            },
            "tenantCredentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "tenantCredentials": {
            "tenant-1": {
              "query": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              },
              "changeStream": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              },
              "collectionScan": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              }
            },
            "tenant-2": {
              "query": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              }
            }
          },
          "collectionScan": {
            "modelConfig": {
              "batchSize": 100,
              "batchTokenLimit": 1000,
              "outputDimensions": 512,
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "initialRetryWaitMs": 50,
              "jitter": 0.1,
              "maxRetries": 50,
              "maxRetryWaitMs": 10
            },
            "credentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "changeStream": {
            "modelConfig": {
              "batchSize": 100,
              "batchTokenLimit": 1000,
              "outputDimensions": 512,
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "initialRetryWaitMs": 50,
              "jitter": 0.1,
              "maxRetries": 50,
              "maxRetryWaitMs": 10
            },
            "credentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "isDedicatedCluster": true
        }
      },
      "bson": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3-large",
        "config": {
          "region": "us-east-1",
          "modelConfig": {
            "batchSize": {
              "$numberInt": "100"
            },
            "batchTokenLimit": {
              "$numberInt": "1000"
            },
            "outputDimensions": {
              "$numberInt": "512"
            },
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "maxRetries": {
              "$numberInt": "50"
            },
            "initialRetryWaitMs": {
              "$numberLong": "50"
            },
            "maxRetryWaitMs": {
              "$numberLong": "10"
            },
            "jitter": {
              "$numberDouble": "0.1"
            }
          },
          "credentials": {
            "apiToken": "xxx-sanitized-xxx",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "query": {
            "modelConfig": {
              "batchSize": {
                "$numberInt": "100"
              },
              "batchTokenLimit": {
                "$numberInt": "1000"
              },
              "outputDimensions": {
                "$numberInt": "512"
              },
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "maxRetries": {
                "$numberInt": "50"
              },
              "initialRetryWaitMs": {
                "$numberLong": "50"
              },
              "maxRetryWaitMs": {
                "$numberLong": "10"
              },
              "jitter": {
                "$numberDouble": "0.1"
              }
            },
            "credentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            },
            "tenantCredentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "tenantCredentials": {
            "tenant-1": {
              "query": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              },
              "changeStream": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              },
              "collectionScan": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              }
            },
            "tenant-2": {
              "query": {
                "apiToken": "xxx-sanitized-xxx",
                "expirationDate": "2024-10-15T22:32:20.925Z"
              }
            }
          },
          "collectionScan": {
            "modelConfig": {
              "batchSize": {
                "$numberInt": "100"
              },
              "batchTokenLimit": {
                "$numberInt": "1000"
              },
              "outputDimensions": {
                "$numberInt": "512"
              },
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "maxRetries": {
                "$numberInt": "50"
              },
              "initialRetryWaitMs": {
                "$numberLong": "50"
              },
              "maxRetryWaitMs": {
                "$numberLong": "10"
              },
              "jitter": {
                "$numberDouble": "0.1"
              }
            },
            "credentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "changeStream": {
            "modelConfig": {
              "batchSize": {
                "$numberInt": "100"
              },
              "batchTokenLimit": {
                "$numberInt": "1000"
              },
              "outputDimensions": {
                "$numberInt": "512"
              },
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "maxRetries": {
                "$numberInt": "50"
              },
              "initialRetryWaitMs": {
                "$numberLong": "50"
              },
              "maxRetryWaitMs": {
                "$numberLong": "10"
              },
              "jitter": {
                "$numberDouble": "0.1"
              }
            },
            "credentials": {
              "apiToken": "xxx-sanitized-xxx",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "isDedicatedCluster": true
        }
      }
    },
    {
      "description": "voyage-3.5-lite full config",
      "json": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3.5-lite",
        "config": {
          "modelConfig": {
            "batchSize": 100,
            "batchTokenLimit": 1000,
            "outputDimensions": 512,
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "initialRetryWaitMs": 50,
            "jitter": 0.1,
            "maxRetries": 50,
            "maxRetryWaitMs": 10
          },
          "credentials": {
            "apiToken": "token123",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "query": {
            "modelConfig": {
              "batchSize": 100,
              "batchTokenLimit": 1000,
              "outputDimensions": 512,
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "initialRetryWaitMs": 50,
              "jitter": 0.1,
              "maxRetries": 50,
              "maxRetryWaitMs": 10
            },
            "credentials": {
              "apiToken": "token123",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "collectionScan": {
            "modelConfig": {
              "batchSize": 100,
              "batchTokenLimit": 1000,
              "outputDimensions": 512,
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "initialRetryWaitMs": 50,
              "jitter": 0.1,
              "maxRetries": 50,
              "maxRetryWaitMs": 10
            },
            "credentials": {
              "apiToken": "token123",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "changeStream": {
            "modelConfig": {
              "batchSize": 100,
              "batchTokenLimit": 1000,
              "outputDimensions": 512,
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "initialRetryWaitMs": 50,
              "jitter": 0.1,
              "maxRetries": 50,
              "maxRetryWaitMs": 10
            },
            "credentials": {
              "apiToken": "token123",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "isDedicatedCluster": true
        }
      },
      "bson": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3.5-lite",
        "config": {
          "modelConfig": {
            "batchSize": {
              "$numberInt": "100"
            },
            "batchTokenLimit": {
              "$numberInt": "1000"
            },
            "outputDimensions": {
              "$numberInt": "512"
            },
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "maxRetries": {
              "$numberInt": "50"
            },
            "initialRetryWaitMs": {
              "$numberLong": "50"
            },
            "maxRetryWaitMs": {
              "$numberLong": "10"
            },
            "jitter": {
              "$numberDouble": "0.1"
            }
          },
          "credentials": {
            "apiToken": "token123",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "query": {
            "modelConfig": {
              "batchSize": {
                "$numberInt": "100"
              },
              "batchTokenLimit": {
                "$numberInt": "1000"
              },
              "outputDimensions": {
                "$numberInt": "512"
              },
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "maxRetries": {
                "$numberInt": "50"
              },
              "initialRetryWaitMs": {
                "$numberLong": "50"
              },
              "maxRetryWaitMs": {
                "$numberLong": "10"
              },
              "jitter": {
                "$numberDouble": "0.1"
              }
            },
            "credentials": {
              "apiToken": "token123",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "collectionScan": {
            "modelConfig": {
              "batchSize": {
                "$numberInt": "100"
              },
              "batchTokenLimit": {
                "$numberInt": "1000"
              },
              "outputDimensions": {
                "$numberInt": "512"
              },
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "maxRetries": {
                "$numberInt": "50"
              },
              "initialRetryWaitMs": {
                "$numberLong": "50"
              },
              "maxRetryWaitMs": {
                "$numberLong": "10"
              },
              "jitter": {
                "$numberDouble": "0.1"
              }
            },
            "credentials": {
              "apiToken": "token123",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "changeStream": {
            "modelConfig": {
              "batchSize": {
                "$numberInt": "100"
              },
              "batchTokenLimit": {
                "$numberInt": "1000"
              },
              "outputDimensions": {
                "$numberInt": "512"
              },
              "truncation": "START"
            },
            "errorHandlingConfig": {
              "maxRetries": {
                "$numberInt": "50"
              },
              "initialRetryWaitMs": {
                "$numberLong": "50"
              },
              "maxRetryWaitMs": {
                "$numberLong": "10"
              },
              "jitter": {
                "$numberDouble": "0.1"
              }
            },
            "credentials": {
              "apiToken": "token123",
              "expirationDate": "2024-10-15T22:32:20.925Z"
            }
          },
          "isDedicatedCluster": true
        }
      }
    },
    {
      "description": "voyage-3.5 default config",
      "json": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3.5",
        "config": {
          "modelConfig": {
            "batchSize": 100,
            "batchTokenLimit": 1000,
            "outputDimensions": 512,
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "initialRetryWaitMs": 50,
            "jitter": 0.1,
            "maxRetries": 50,
            "maxRetryWaitMs": 10
          },
          "credentials": {
            "apiToken": "token123",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "isDedicatedCluster": true
        }
      },
      "bson": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3.5",
        "config": {
          "modelConfig": {
            "batchSize": {
              "$numberInt": "100"
            },
            "batchTokenLimit": {
              "$numberInt": "1000"
            },
            "outputDimensions": {
              "$numberInt": "512"
            },
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "maxRetries": {
              "$numberInt": "50"
            },
            "initialRetryWaitMs": {
              "$numberLong": "50"
            },
            "maxRetryWaitMs": {
              "$numberLong": "10"
            },
            "jitter": {
              "$numberDouble": "0.1"
            }
          },
          "credentials": {
            "apiToken": "token123",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "isDedicatedCluster": true
        }
      }
    },
    {
      "description": "voyage-3.5 with isDedicatedCluster false",
      "json": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3.5",
        "config": {
          "modelConfig": {
            "batchSize": 100,
            "batchTokenLimit": 1000,
            "outputDimensions": 512,
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "initialRetryWaitMs": 50,
            "jitter": 0.1,
            "maxRetries": 50,
            "maxRetryWaitMs": 10
          },
          "credentials": {
            "apiToken": "token123",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "isDedicatedCluster": false
        }
      },
      "bson": {
        "embeddingProvider": "VOYAGE",
        "modelName": "voyage-3.5",
        "config": {
          "modelConfig": {
            "batchSize": {
              "$numberInt": "100"
            },
            "batchTokenLimit": {
              "$numberInt": "1000"
            },
            "outputDimensions": {
              "$numberInt": "512"
            },
            "truncation": "START"
          },
          "errorHandlingConfig": {
            "maxRetries": {
              "$numberInt": "50"
            },
            "initialRetryWaitMs": {
              "$numberLong": "50"
            },
            "maxRetryWaitMs": {
              "$numberLong": "10"
            },
            "jitter": {
              "$numberDouble": "0.1"
            }
          },
          "credentials": {
            "apiToken": "token123",
            "expirationDate": "2024-10-15T22:32:20.925Z"
          },
          "isDedicatedCluster": false
        }
      }
    }
  ]
}